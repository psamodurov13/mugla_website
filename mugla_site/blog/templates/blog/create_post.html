{% extends 'base.html' %}
{% load static %}
{% load tags_list_tag %}
{% load cropping %}
{% load thumbnail %}


{% block title %}{{ block.super }}{% endblock %}


{% block h1 %}{{ title }}{% endblock %}


    {% block content %}
    <div class="content col-sm-12 col-md-9">

        <div id="custom-form">
            <form action="{% url 'create_post' %}" enctype='multipart/form-data' method="post">
            {% csrf_token %}
            {{ form.non_field.errors }}
            <div class="mb-3">
                <label for="{{ form.title.id_for_label }}" class="form-label">Название</label>
                {{ form.title }}
                {{ form.title.errors}}
            </div>
            <div class="mb-3">
                <label for="{{ form.photo.id_for_label }}" class="form-label">Фото</label>
                {{ form.photo }}
                {{ form.photo.errors}}
                <img id="preview_img" src="/media/default.jpg" alt="default image" />
                <img id="display-img"/>
                <script>
                    id_photo.onchange = evt => {
                      const [file] = id_photo.files
                      if (file) {
                        preview_img.src = URL.createObjectURL(file)
                      }
                    }
                </script>
            </div>

            <div class="mb-3">
                <label for="{{ form.content.id_for_label }}" class="form-label">Описание</label>
                {{ form.content }}
                {{ form.content.errors}}
            </div>
            <div class="mb-3">
                <label for="{{ form.description.id_for_label }}" class="form-label">Краткое описание</label>
                {{ form.description }}
                {{ form.description.errors}}
            </div>
            <div class="mb-3">
                <label for="{{ form.category.id_for_label }}" class="form-label">Категория</label>
                {{ form.category }}
                {{ form.category.errors}}
            </div>
            <div class="mb-3">
                <label for="{{ form.tags.id_for_label }}" class="form-label">Теги</label>
                {{ form.tags }}
                {{ form.tags.errors}}
            </div>
            <div class="mb-3">
                <label for="{{ form.cities.id_for_label }}" class="form-label">Город</label>
                {{ form.cities }}
                {{ form.cities.errors}}
            </div>


            <button type="submit" class="btn btn-outline-info">Добавить пост</button>
            </form>
        </div>


    </div>
    {% endblock %}



    {% block sidebar %}
    {% include 'inc/_sidebar_blog.html' %}
    {% endblock %}



